;$(function(){if(getQueryVariable("trim")&&getQueryVariable("paint")&&getQueryVariable("wheels")&&getQueryVariable("interior")&&getQueryVariable("rearseats")){basics={"trim":getQueryVariable("trim"),"paint":getQueryVariable("paint"),"wheels":getQueryVariable("wheels"),"interior":getQueryVariable("interior"),"rearseats":getQueryVariable("rearseats"),"ratio":1};if(getQueryVariable("autopilot")){basics["autopilot"]=getQueryVariable("autopilot");}else{basics["autopilot"]=false;}}else if($.cookie('USAconfigmx29062022')){basics=JSON.parse($.cookie('USAconfigmx29062022'));}else{basics={"trim":"$MTX13","paint":"$PPSW","wheels":"$WX00","interior":"$IBE00","rearseats":"$CC01","autopilot":false,"charging":false,"ratio":1};}
setBasics(basics.trim,basics.paint,basics.wheels,basics.interior,basics.rearseats);});function setBasics(trim=basics.trim,paint=basics.paint,wheels=basics.wheels,interior=basics.interior,rearseats=basics.rearseats,showinterior=false,autopilot=false,charging=false){try{autopilotPrev=basics.autopilot;chargingPrev=basics.charging;basics={"trim":trim,"paint":paint,"wheels":wheels,"interior":interior,"rearseats":rearseats,};if(autopilot&&autopilotPrev&&$(".autopilot[data-id='"+autopilot+"']").hasClass("active")){basics["autopilot"]=false;autopilot=false;$(".autopilot[data-id='"+autopilot+"']").removeClass("active")}else if(autopilot||(!autopilot&&autopilotPrev)){basics["autopilot"]=autopilot?autopilot:autopilotPrev;autopilot=autopilot?autopilot:autopilotPrev;}
if(charging&&chargingPrev=="charging"&&$(".option[data-id='charging']").hasClass("active")){basics["charging"]=false;charging=false;$(".option[data-id='charging']").removeClass("active");}else if(charging||(!charging&&chargingPrev=="charging")){basics["charging"]="charging";charging="charging";}
trimShort=trim.substr(1);paintShort=paint.substr(1);wheelsShort=wheels.substr(1);interiorShort=interior.substr(1);rearseatsShort=rearseats.substr(1);$(".option, .paint, .wheel, .interior, .rearseat, .autopilot").removeClass("active");$(".option[data-id='"+trim+"'], .paint[data-id='"+paint+"'], .wheel[data-id='"+wheels+"'], .interior[data-id='"+interior+"'], .rearseat[data-id='"+rearseats+"']").addClass("active");$(".spec.range .value span").html(modelsInfo[trim].specs.range);$(".spec.topspeed .value span").html(modelsInfo[trim].specs.topspeed);$(".spec.acceleration .value span").html(modelsInfo[trim].specs.acceleration);$(".paints .paint").hide();$(".wheels .wheel").hide();$(".interiors .interior").hide();$(".rearseats .rearseat").hide();for(const[key,value]of Object.entries(modelsInfo[trim].paintDetailed)){$(".paints .paint[data-id='"+`${key}`+"']").show();}
for(const[key,value]of Object.entries(modelsInfo[trim].wheelsDetailed)){$(".wheels .wheel[data-id='"+`${key}`+"']").show();}
for(const[key,value]of Object.entries(modelsInfo[trim].interiorDetailed)){$(".interiors .interior[data-id='"+`${key}`+"']").show();}
for(const[key,value]of Object.entries(modelsInfo[trim].rearseatsDetailed)){$(".rearseats .rearseat[data-id='"+`${key}`+"']").show();}
$(".paints .description .price span").html(modelsInfo[trim].paintDetailed[paint].price);$(".wheels .description .price span").html(modelsInfo[trim].wheelsDetailed[wheels].price);$(".interiors .description .price span").html(modelsInfo[trim].interiorDetailed[interior].price);$(".rearseats .description .price span").html(modelsInfo[trim].rearseatsDetailed[rearseats].price);$(".paints .description .title").html(modelsInfo[trim].paintDetailed[paint].name);$(".wheels .description .title").html(modelsInfo[trim].wheelsDetailed[wheels].name);$(".interiors .description .title").html(modelsInfo[trim].interiorDetailed[interior].name);$(".rearseats .description .title").html(modelsInfo[trim].rearseatsDetailed[rearseats].name);if(!showinterior){$(".details .design image").clearQueue().fadeTo(0,0).attr("xlink:href","assets/FRONT34"+trimShort+paintShort+wheelsShort+interiorShort+".jpg?v20082021").fadeTo(0,1);$(".details .inside image").clearQueue().fadeTo(0,0).attr("xlink:href","assets/INTERIOR"+paintShort+interiorShort+"ST0Y.jpg?v20082021").fadeTo(0,1);$(".details .wheelsWrap image, .details .discs image").clearQueue().fadeTo(0,0).attr("xlink:href","assets/RIMCLOSEUP"+trimShort+paintShort+wheelsShort+interiorShort+".jpg?v20082021").fadeTo(0,1);$(".details .backsideWrap image").clearQueue().fadeTo(0,0).attr("xlink:href","assets/REAR34"+trimShort+paintShort+wheelsShort+interiorShort+".jpg?v20082021").fadeTo(0,1);$(".final-image img, #order-sent .inside .pic img").attr("src","assets/FRONT34"+trimShort+paintShort+wheelsShort+interiorShort+".jpg?v20082021");$(".details .design svg").removeClass("maxheight");$("#wrapper .details .specs").show();}else{if(showinterior=="rearseats"){var interiorPic="assets/"+rearseatsShort+".jpg?v20082021";}else{var interiorPic="assets/INTERIOR"+paintShort+interiorShort+"ST0Y.jpg?v20082021";}
if(mobile==1){$(".details .inside image").clearQueue().fadeTo(0,0).attr("xlink:href",interiorPic).fadeTo(0,1);}else{$(".details .interiorWrap image").clearQueue().fadeTo(0,0).attr("xlink:href",interiorPic).fadeTo(0,1);$(".autopilotWrap, .contacts, .backsideWrap, .design").fadeOut();$("#wrapper .details .specs").hide();$(".interiorWrap, .continue").fadeIn();$(".details .design svg").addClass("maxheight");}}
var finalOptions="<div>"+modelsInfo[trim].specs.name+"</div><div>"+modelsInfo[trim].paintDetailed[paint].name+"</div><div>"+modelsInfo[trim].wheelsDetailed[wheels].name+"</div><div>"+modelsInfo[trim].interiorDetailed[interior].name+"</div><div>"+modelsInfo[trim].rearseatsDetailed[rearseats].name+"</div>";finalBasePrice=modelsInfo[trim].baseprice+modelsInfo[trim].paintDetailed[paint].price+modelsInfo[trim].wheelsDetailed[wheels].price+modelsInfo[trim].interiorDetailed[interior].price+modelsInfo[trim].rearseatsDetailed[rearseats].price+1200+250;if(autopilot){$(".autopilot[data-id='"+autopilot+"']").addClass("active");finalOptions=finalOptions+"<div>"+modelsInfo[trim].autopilotDetailed[autopilot].name+"</div>";finalBasePrice=finalBasePrice+modelsInfo[trim].autopilotDetailed[autopilot].price;}
skipThisString=(Math.round(finalBasePrice/tax*modelsInfo[trim].ratio)).toLocaleString();$(".skipThisString").html(skipThisString);if(charging){$(".option[data-id='charging']").addClass("active");finalOptions=finalOptions+"<div>Зарядная станция Tesla Wall Connector</div>";finalBasePrice=finalBasePrice+149000/usdrub;}
finalBasePrice=(Math.round(finalBasePrice*modelsInfo[trim].ratio+modelsInfo[trim].environment));finalPrice=Math.round(finalBasePrice).toLocaleString();finalPriceRub=Math.round(finalBasePrice*usdrub).toLocaleString();$(".final-options, #order-sent .options").html(finalOptions);$(".summary .sum .eur span, .final-price .eur span").html(finalPrice);$(".summary .sum .rub span, .final-price .rub span").html(finalPriceRub);$.cookie('USAconfigmx29062022',JSON.stringify(basics),{expires:1,path:'/'});var shortlink="https://moscowteslaclub.ru/model-x/configurator-usa/?from=shortlink&trim="+basics.trim+"&paint="+basics.paint+"&wheels="+basics.wheels+"&interior="+basics.interior+"&rearseats="+basics.rearseats;if(autopilot){shortlink+="&autopilot="+basics.autopilot;}
basics.price=finalPrice;basics.picfront="assets/FRONT34"+trimShort+paintShort+wheelsShort+interiorShort+".jpg";basics.picside="assets/SIDE"+trimShort+paintShort+wheelsShort+interiorShort+".jpg";basics.picinterior="assets/INTERIOR"+paintShort+interiorShort+"ST0Y.jpg";$("input[name=shortlink]").val(shortlink);$(".shortlink").empty().removeClass("success").html('Ссылка на конфигурацию&nbsp;<img alt="Скопировать ссылку" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAACiElEQVRoge3aTYhOURzH8Q/DiIXXwUIkEaMoIhsLkRIbycJClEZZKIoVFkrZsGBDyka27GRIeSllh0LKS0xDTEIkNAwW5zzN9Zg7c5+5z8xz1f3W7dx7Xv7n/7v3/O85zz3PCPlYhh1oymmnmt/owlO0432d7f9De+x0KI+fOIdZ/TkyIqeQddiDUTntVNOE6Ziv92l/whZcqXNfw8JUHMRn4en8wJqGepSTVrwUxLwXBP63LMI3QczJ6sIsMdKCFRhXX7/AL+Ht9ECIgYE4hv3CUJuK7iydjMUpYVwO9ZupG1exagCfWhNtVmcRMQrXhkFAX8f5eBPTqAR+WxYhbQnDZzAzS6MaeRftH8UuPE70eRtjUto9j3UOZOnkZqx8S/65Jo2KkN3xejRO+PsG9sXTWH4omTkypfK8mFZm7qGgYrfiww/sxel4vRNLshpLE9Ic0y+1elcD72K6oCp/PzqFkbAvq7E0IcPB9Zhux9JE/lecjefrZVz+1HuNVAvHsQ3jcQeX8EwYcnNinUmYgY6BjDVSSAc24qLg8KaUei0KLgRuCCvcXViJKVXlT/Awi6FGCyEE/ZG8RhoZ7HWlyEKahEkyE0UV0iwsWV7J+NujCDHSF9P0ri7m6508UynqE6mZUkjRKIUUjVJI0SiFFI1SSNEohRSNUkjRKIUUjVJI0SiFNJCumL5JZhb1K0p/bBa+3l9NZqYJ6Ylp5g9kdaY5cd5TVfYWl6sbpA2t1zFdXgenBkOy3848hg4L+xQ92JrH0CBYqPdfDnezNkrb6JyIe5gdr18Iu6lDzWQsFoZ8D9YKWw+5mIv7GrPX/lEI6swMtPXchA3CJsyEWgwPku94hAv4UEvDP3JQ27Am6IFYAAAAAElFTkSuQmCC"/>');var pdfLink="https://moscowteslaclub.ru/include/configurator/print.php?trim="+basics.trim+"&paint="+basics.paint+"&wheels="+basics.wheels+"&interior="+basics.interior+"&price="+finalPrice+"&picfront=assets/FRONT34"+trimShort+paintShort+wheelsShort+interiorShort+".jpg"+"&picside=assets/SIDE"+trimShort+paintShort+wheelsShort+interiorShort+".jpg"+"&rearseats="+basics.rearseats+"&picinterior=assets/INTERIOR"+paintShort+interiorShort+"ST0Y.jpg";$("input[name=pdflink]").val(pdfLink);}catch(e){let basics={"trim":trim,"paint":paint,"wheels":wheels};}}
var interiorsWrap=document.querySelector('#interiors');var interiorsWrap2=document.querySelector('#interiors2');var interiorsWrap3=document.querySelector('#interiors3');var wheelsWrap=document.querySelector('.wheels .description');var trimWrap=document.querySelector('.choose-model');var autopilotWrap=document.querySelector('#autopilot');var contactsWrap=document.querySelector('.contacts');var chargingWrap=document.querySelector('.chargingWrap');scrollingElement.addEventListener('scroll',function(event){setBasics(undefined,undefined,undefined,undefined,undefined,false);if(isAnyPartOfElementInViewport(trimWrap)){$(".autopilotWrap, .contacts, .backsideWrap, .interiorWrap").fadeOut();$(".design, .continue").fadeIn();}else if(isAnyPartOfElementInViewport(chargingWrap)){$(".wheelsWrap, .autopilotWrap, .contacts, .design, .interiorWrap").fadeOut();$(".backsideWrap, .continue").fadeIn();}else if(isAnyPartOfElementInViewport(interiorsWrap)){$(".wheelsWrap, .autopilotWrap, .contacts, .backsideWrap, .design").fadeOut();$(".interiorWrap, .continue").fadeIn();$(".interiorWrap").css("display","flex");setBasics(undefined,undefined,undefined,undefined,undefined,true);}else if(isAnyPartOfElementInViewport(autopilotWrap)){$(".design, .wheelsWrap, .contacts, .backsideWrap, .interiorWrap").fadeOut();$(".order").removeClass("flex");var vid=document.getElementById("autopilotVideo");vid.play();$(".autopilotWrap, .continue").fadeIn();}},false);function createProposal(){paintpic=$("div[data-id='"+basics.paint+"'] img").attr("src");wheelspic=$("div[data-id='"+basics.wheels+"'] img").attr("src");interiorpic=$("div[data-id='"+basics.interior+"'] img").attr("src");var url="/custom-scripts/generator-new/?minify=1&trim="+basics.trim+"&paint="+basics.paint+"&wheels="+basics.wheels+"&interior="+basics.interior+"&picfront="+basics.picfront+"&picside="+basics.picside+"&picinterior="+basics.picinterior+"&price="+basics.price+"&autopilot="+basics.autopilot+"&rearseats="+basics.rearseats+"&paintpic="+paintpic+"&wheelspic="+wheelspic+"&interiorpic="+interiorpic;window.location.href=url;}
function addToStock(){paintpic=$("div[data-id='"+basics.paint+"'] img").attr("src");wheelspic=$("div[data-id='"+basics.wheels+"'] img").attr("src");interiorpic=$("div[data-id='"+basics.interior+"'] img").attr("src");var url="/custom-scripts/generator-stock/?minify=1&trim="+basics.trim+"&paint="+basics.paint+"&wheels="+basics.wheels+"&interior="+basics.interior+"&picfront="+basics.picfront+"&picside="+basics.picside+"&picinterior="+basics.picinterior+"&price="+basics.price+"&autopilot="+basics.autopilot+"&paintpic="+paintpic+"&wheelspic="+wheelspic+"&interiorpic="+interiorpic;window.location.href=url;};;fotoramaVersion="4.6.4",function(t,e,n,o,i){"use strict";var a="fotorama",r="fullscreen",s=a+"__wrap",u=s+"--css2",l=s+"--css3",c=s+"--video",f=s+"--fade",d=s+"--slide",h=s+"--no-controls",m=s+"--no-shadows",p=s+"--pan-y",v=s+"--rtl",g=s+"--only-active",w=s+"--no-captions",y=s+"--toggle-arrows",b=a+"__stage",x=b+"__frame",_=x+"--video",k=b+"__shaft",C=a+"__grab",T=a+"__pointer",S=a+"__arr",M=S+"--disabled",F=S+"--prev",E=S+"--next",P=a+"__nav",$=P+"-wrap",j=P+"__shaft",N=P+"--dots",q=P+"--thumbs",A=P+"__frame",I=A+"--dot",z=A+"--thumb",L=a+"__shadow"+"s",O=L+"--left",D=L+"--right",R=a+"__active",H=a+"__select",W=a+"--hidden",K=a+"--fullscreen",V=a+"__fullscreen-icon",B=a+"__error",X=a+"__loading",Q=a+"__loaded",Y=Q+"--full",U=Q+"--img",G=a+"__grabbing",J=a+"__img",Z=J+"--full",tt=a+"__dot",et=a+"__thumb",nt=et+"-border",ot=a+"__html",it=a+"__video",at=it+"-play",rt=it+"-close",st=a+"__caption",ut=a+"__caption__wrap",lt=a+"__spinner",ct='" tabindex="0" role="button',ft={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},dt="webkit moz o ms khtml".split(" ");if(void 0!==e.cancelFullScreen)ft.ok=!0;else for(var ht=0,mt=dt.length;ht<mt;ht++)if(ft.prefix=dt[ht],void 0!==e[ft.prefix+"CancelFullScreen"]){ft.ok=!0;break}ft.ok&&(ft.event=ft.prefix+"fullscreenchange",ft.is=function(){switch(this.prefix){case"":return e.fullScreen;case"webkit":return e.webkitIsFullScreen;default:return e[this.prefix+"FullScreen"]}},ft.request=function(t){return""===this.prefix?t.requestFullScreen():t[this.prefix+"RequestFullScreen"]()},ft.cancel=function(t){return""===this.prefix?e.cancelFullScreen():e[this.prefix+"CancelFullScreen"]()});var pt,vt={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},gt={top:"auto",left:"auto",className:""};pt=function(){var t,n=["webkit","Moz","ms","O"],o={};function a(t,n){var o,i=e.createElement(t||"div");for(o in n)i[o]=n[o];return i}function r(t){for(var e=1,n=arguments.length;e<n;e++)t.appendChild(arguments[e]);return t}var s,u=(s=a("style",{type:"text/css"}),r(e.getElementsByTagName("head")[0],s),s.sheet||s.styleSheet);function l(e,n,i,a){var r=["opacity",n,~~(100*e),i,a].join("-"),s=.01+i/a*100,l=Math.max(1-(1-e)/n*(100-s),e),c=t.substring(0,t.indexOf("Animation")).toLowerCase(),f=c&&"-"+c+"-"||"";return o[r]||(u.insertRule("@"+f+"keyframes "+r+"{0%{opacity:"+l+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+n)%100+"%{opacity:"+e+"}100%{opacity:"+l+"}}",u.cssRules.length),o[r]=1),r}function c(t,e){var o,a,r=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),a=0;a<n.length;a++)if(o=n[a]+e,r[o]!==i)return o;if(r[e]!==i)return e}function f(t,e){for(var n in e)t.style[c(t,n)||n]=e[n];return t}function d(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]===i&&(t[o]=n[o])}return t}function h(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var m={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function p(t){if(void 0===this)return new p(t);this.opts=d(t||{},p.defaults,m)}p.defaults={},d(p.prototype,{spin:function(e){this.stop();var n,o,i=this,r=i.opts,s=i.el=f(a(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),u=r.radius+r.length+r.width;if(e&&(e.insertBefore(s,e.firstChild||null),o=h(e),n=h(s),f(s,{left:("auto"==r.left?o.x-n.x+(e.offsetWidth>>1):parseInt(r.left,10)+u)+"px",top:("auto"==r.top?o.y-n.y+(e.offsetHeight>>1):parseInt(r.top,10)+u)+"px"})),s.setAttribute("role","progressbar"),i.lines(s,i.opts),!t){var l,c=0,d=(r.lines-1)*(1-r.direction)/2,m=r.fps,p=m/r.speed,v=(1-r.opacity)/(p*r.trail/100),g=p/r.lines;!function t(){c++;for(var e=0;e<r.lines;e++)l=Math.max(1-(c+(r.lines-e)*g)%p*v,r.opacity),i.opacity(s,e*r.direction+d,l,r);i.timeout=i.el&&setTimeout(t,~~(1e3/m))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=i),this},lines:function(e,n){var o,i,s,u=0,c=(n.lines-1)*(1-n.direction)/2;function d(t,e){return f(a(),{position:"absolute",width:n.length+n.width+"px",height:n.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*u+n.rotate)+"deg) translate("+n.radius+"px,0)",borderRadius:(n.corners*n.width>>1)+"px"})}for(;u<n.lines;u++)o=f(a(),{position:"absolute",top:1+~(n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:t&&l(n.opacity,n.trail,c+u*n.direction,n.lines)+" "+1/n.speed+"s linear infinite"}),n.shadow&&r(o,f(d("#000","0 0 4px #000"),{top:"2px"})),r(e,r(o,d((i=n.color,s=u,"string"==typeof i?i:i[s%i.length]),"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var v=f(a("group"),{behavior:"url(#default#VML)"});return!c(v,"transform")&&v.adj?initVML():t=c(v,"animation"),p}();var wt,yt,bt,xt,_t,kt,Ct=o(t),Tt=o(e),St=(n.hash.replace("#",""),!1),Mt="CSS1Compat"===e.compatMode,Ft=ft.ok,Et=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),Pt=!St||Et,$t=navigator.msPointerEnabled,jt="onwheel"in e.createElement("div")?"wheel":e.onmousewheel!==i?"mousewheel":"DOMMouseScroll",Nt=250,qt=300,At=1400,It=64,zt=500,Lt=333,Ot="$stageFrame",Dt="$navDotFrame",Rt="$navThumbFrame",Ht="auto",Wt=function(t){var e="bez_"+o.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof o.easing[e]){var n=function(t,e){var n=[null,null],o=[null,null],i=[null,null],a=function(a,r){return i[r]=3*t[r],o[r]=3*(e[r]-t[r])-i[r],n[r]=1-i[r]-o[r],a*(i[r]+a*(o[r]+a*n[r]))},r=function(t){return i[0]+t*(2*o[0]+3*n[0]*t)};return function(t){return a(function(t){for(var e,n=t,o=0;++o<14&&(e=a(n,0)-t,!(Math.abs(e)<.001));)n-=e/r(n);return n}(t),1)}};o.easing[e]=function(e,o,i,a,r){return a*n([t[0],t[1]],[t[2],t[3]])(o/r)+i}}return e}([.1,0,.25,1]),Kt="50%",Vt={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:2,glimpse:0,fit:"contain",position:Kt,thumbposition:Kt,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:It,thumbheight:It,thumbmargin:2,thumbborderwidth:2,thumbfit:"cover",allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:qt,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,enableifsingleframe:!1,controlsonstart:!0,shuffle:!1,direction:"ltr",shadows:!0,spinner:null},Bt={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1};function Xt(){}function Qt(t,e,n){return Math.max(isNaN(e)?-1/0:e,Math.min(isNaN(n)?1/0:n,t))}function Yt(t){var e={};return St?e.transform="translate3d("+t+"px,0,0)":e.left=t,e}function Ut(t){return{"transition-duration":t+"ms"}}function Gt(t,e){return isNaN(t)?e:t}function Jt(t,e){return Gt(+String(t).replace(e||"px",""))}function Zt(t,e){return Gt(function(t){return/%$/.test(t)?Jt(t,"%"):i}(t)/100*e,Jt(t))}function te(t){return(!isNaN(Jt(t))||!isNaN(Jt(t,"%")))&&t}function ee(t,e,n,o){return(t-(o||0))*(e+(n||0))}function ne(t,e,n,o){var i,a=t.data();a&&(a.onEndFn=function(){i||(i=!0,clearTimeout(a.tT),n())},a.tProp=e,clearTimeout(a.tT),a.tT=setTimeout(function(){a.onEndFn()},1.5*o),function(t){var e=t.data();e.tEnd||(we(t[0],"transitionend",function(t){e.tProp&&t.propertyName.match(e.tProp)&&e.onEndFn()}),e.tEnd=!0)}(t))}function oe(t,e){if(t.length){var n=t.data();St?(t.css(Ut(0)),n.onEndFn=Xt,clearTimeout(n.tT)):t.stop();var o=ie(e,function(){return function(t){return St?+((e=t.css("transform")).match(/ma/)&&e.match(/-?\d+(?!d)/g)[e.match(/3d/)?12:4]):+t.css("left").replace("px","");var e}(t)});return t.css(Yt(o)),o}}function ie(){for(var t,e=0,n=arguments.length;e<n&&"number"!=typeof(t=e?arguments[e]():arguments[e]);e++);return t}function ae(t,e){return Math.round(t+(e-t)/1.5)}function re(){return re.p=re.p||("https:"===n.protocol?"https://":"http://"),re.p}function se(t,n){if("string"!=typeof t)return t;var o,i;if((t=function(t){var n=e.createElement("a");return n.href=t,n}(t)).host.match(/youtube\.com/)&&t.search){if(o=t.search.split("v=")[1]){var a=o.indexOf("&");-1!==a&&(o=o.substring(0,a)),i="youtube"}}else t.host.match(/youtube\.com|youtu\.be/)?(o=t.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),i="youtube"):t.host.match(/vimeo\.com/)&&(i="vimeo",o=t.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return o&&i||!n||(o=t.href,i="custom"),!!o&&{id:o,type:i,s:t.search.replace(/^\?/,""),p:re()}}function ue(t,e,n,i){for(var a=0,r=t.length;a<r;a++){var s=t[a];if(s.i===n&&s.thumbsReady){var u={videoReady:!0};u[Ot]=u[Rt]=u[Dt]=!1,i.splice(a,1,o.extend({},s,u,e));break}}}function le(t){var e=[];function n(t,e,n){var i=n.thumb&&n.img!==n.thumb,a=Jt(n.width||t.attr("width")),r=Jt(n.height||t.attr("height"));o.extend(n,{width:a,height:r,thumbratio:ge(n.thumbratio||Jt(n.thumbwidth||e&&e.attr("width")||i||a)/Jt(n.thumbheight||e&&e.attr("height")||i||r))})}return t.children().each(function(){var t,i,a,r,s,u,l,c,f,d=o(this),h=ve(o.extend(d.data(),{id:d.attr("id")}));if(d.is("a, img"))i=h,a=!0,r=(t=d).children("img").eq(0),s=t.attr("href"),u=t.data("src"),l=r.attr("src"),c=i.video,(f=!!a&&se(s,!0===c))?s=!1:f=c,n(t,r,o.extend(i,{video:f,img:i.img||s||u||l,thumb:i.thumb||l||u||s}));else{if(d.is(":empty"))return;n(d,null,o.extend(h,{html:this,_html:d.html()}))}e.push(h)}),e}function ce(t,e,n,o){return ce.i||(ce.i=1,ce.ii=[!0]),o=o||ce.i,void 0===ce.ii[o]&&(ce.ii[o]=!0),t()?e():ce.ii[o]&&setTimeout(function(){ce.ii[o]&&ce(t,e,n,o)},n||100),ce.i++}function fe(t,e,n,o){var i,a=t.data(),r=a.measures;if(r&&(!a.l||a.l.W!==r.width||a.l.H!==r.height||a.l.r!==r.ratio||a.l.w!==e.w||a.l.h!==e.h||a.l.m!==n||a.l.p!==o)){var s=r.width,u=r.height,l=e.w/e.h,c=r.ratio>=l,f="scaledown"===n,d="contain"===n,h="cover"===n,m={x:te((i=((i=o)+"").split(/\s+/))[0])||Kt,y:te(i[1])||Kt};c&&(f||d)||!c&&h?u=(s=Qt(e.w,0,f?s:1/0))/r.ratio:(c&&h||!c&&(f||d))&&(s=(u=Qt(e.h,0,f?u:1/0))*r.ratio),t.css({width:s,height:u,left:Zt(m.x,e.w-s),top:Zt(m.y,e.h-u)}),a.l={W:r.width,H:r.height,r:r.ratio,w:e.w,h:e.h,m:n,p:o}}return!0}function de(t,e,n){return e!==n&&(t<=e?"left":t>=n?"right":"left right")}function he(t,e){return'<div class="'+t+'">'+(e||"")+"</div>"}function me(t){return"[object Array]"==Object.prototype.toString.call(t)&&o.map(t,function(t){return o.extend({},t)})}function pe(t,e,n){t.scrollLeft(e||0).scrollTop(n||0)}function ve(t){if(t){var e={};return o.each(t,function(t,n){e[t.toLowerCase()]=n}),e}}function ge(t){if(t){var e=+t;return isNaN(e)?+(e=t.split("/"))[0]/+e[1]||i:e}}function we(t,e,n,o){e&&(t.addEventListener?t.addEventListener(e,n,!!o):t.attachEvent("on"+e,n))}function ye(t){return{tabindex:-1*t+"",disabled:t}}function be(t,e){we(t,"keyup",function(n){(function(t){return!!t.getAttribute("disabled")})(t)||13==n.keyCode&&e.call(t,n)})}function xe(t,e){we(t,"focus",t.onfocusin=function(n){e.call(t,n)},!0)}function _e(t,e){t.preventDefault?t.preventDefault():t.returnValue=!1,e&&t.stopPropagation&&t.stopPropagation()}function ke(t){return t?">":"<"}function Ce(t,e){var n=t.data(),i=Math.round(e.pos),a=function(){n.sliding=!1,(e.onEnd||Xt)()};void 0!==e.overPos&&e.overPos!==e.pos&&(i=e.overPos,a=function(){Ce(t,o.extend({},e,{overPos:e.pos,time:Math.max(qt,e.time/2)}))});var r=o.extend(Yt(i),e.width&&{width:e.width});n.sliding=!0,St?(t.css(o.extend(Ut(e.time),r)),e.time>10?ne(t,"transform",a,e.time):a()):t.stop().animate(r,e.time,Wt,a)}function Te(t){var e=(t.touches||[])[0]||t;t._x=e.pageX,t._y=e.clientY,t._now=o.now()}function Se(t,n){var i,a,r,s,u,l,c,f,d,h=t[0],m={};function p(t){if(r=o(t.target),m.checked=l=c=d=!1,i||m.flow||t.touches&&t.touches.length>1||t.which>1||bt&&bt.type!==t.type&&_t||(l=n.select&&r.is(n.select,h)))return l;u="touchstart"===t.type,c=r.is("a, a *",h),s=m.control,f=m.noMove||m.noSwipe||s?16:m.snap?0:4,Te(t),a=bt=t,xt=t.type.replace(/down|start/,"move").replace(/Down/,"Move"),(n.onStart||Xt).call(h,t,{control:s,$target:r}),i=m.flow=!0,u&&!m.go||_e(t)}function v(t){if(t.touches&&t.touches.length>1||$t&&!t.isPrimary||xt!==t.type||!i)return i&&g(),void(n.onTouchEnd||Xt)();Te(t);var e=Math.abs(t._x-a._x),o=Math.abs(t._y-a._y),r=e-o,s=(m.go||m.x||r>=0)&&!m.noSwipe,l=r<0;u&&!m.checked?(i=s)&&_e(t):(_e(t),(n.onMove||Xt).call(h,t,{touch:u})),!d&&Math.sqrt(Math.pow(e,2)+Math.pow(o,2))>f&&(d=!0),m.checked=m.checked||s||l}function g(t){(n.onTouchEnd||Xt)();var e=i;m.control=i=!1,e&&(m.flow=!1),!e||c&&!m.checked||(t&&_e(t),_t=!0,clearTimeout(kt),kt=setTimeout(function(){_t=!1},1e3),(n.onEnd||Xt).call(h,{moved:d,$target:r,control:s,touch:u,startEvent:a,aborted:!t||"MSPointerCancel"===t.type}))}function w(){m.flow&&setTimeout(function(){m.flow=!1},Nt)}return $t?(we(h,"MSPointerDown",p),we(e,"MSPointerMove",v),we(e,"MSPointerCancel",g),we(e,"MSPointerUp",g)):(we(h,"touchstart",p),we(h,"touchmove",v),we(h,"touchend",g),we(e,"touchstart",function(){m.flow||setTimeout(function(){m.flow=!0},10)}),we(e,"touchend",w),we(e,"touchcancel",w),Ct.on("scroll",w),t.on("mousedown",p),Tt.on("mousemove",v).on("mouseup",g)),t.on("click","a",function(t){m.checked&&_e(t)}),m}function Me(t,e){var n,i,a,r,s,u,l,c,f,d,h,m,p,v,g=t[0],w=t.data(),y={};function b(o,s){v=!0,n=i=o._x,l=o._now,u=[[l,n]],a=r=y.noMove||s?0:oe(t,(e.getPos||Xt)()),(e.onStart||Xt).call(g,o)}return y=o.extend(Se(e.$wrap,o.extend({},e,{onStart:function(t,e){f=y.min,d=y.max,h=y.snap,m=t.altKey,v=p=!1,e.control||w.sliding||b(t)},onMove:function(o,l){y.noSwipe||(v||b(o),i=o._x,u.push([o._now,i]),s=de(r=a-(n-i),f,d),r<=f?r=ae(r,f):r>=d&&(r=ae(r,d)),y.noMove||(t.css(Yt(r)),p||(p=!0,l.touch||$t||t.addClass(G)),(e.onMove||Xt).call(g,o,{pos:r,edge:s})))},onEnd:function(n){if(!y.noSwipe||!n.moved){v||b(n.startEvent,!0),n.touch||$t||t.removeClass(G);for(var s,l,p,w,x,_,k,C,T,S=(c=o.now())-Nt,M=null,F=qt,E=e.friction,P=u.length-1;P>=0;P--){if(s=u[P][0],l=Math.abs(s-S),null===M||l<p)M=s,w=u[P][1];else if(M===S||l>p)break;p=l}k=Qt(r,f,d);var $=w-i,j=$>=0,N=c-M,q=N>Nt,A=!q&&r!==a&&k===r;h&&(k=Qt(Math[A?j?"floor":"ceil":"round"](r/h)*h,f,d),f=d=k),A&&(h||k===r)&&(T=-$/N,F*=Qt(Math.abs(T),e.timeLow,e.timeHigh),x=Math.round(r+T*F/E),h||(k=x),(!j&&x>d||j&&x<f)&&(_=j?f:d,h||(k=_),C=Qt(k+.03*(C=x-_),_-50,_+50),F=Math.abs((r-C)/(T/E)))),F*=m?10:1,(e.onEnd||Xt).call(g,o.extend(n,{moved:n.moved||q&&h,pos:r,newPos:k,overPos:C,time:F}))}}})),y)}function Fe(t,e){var n,i,a,r=t[0],s={prevent:{}};return we(r,jt,function(t){var r=t.wheelDeltaY||-1*t.deltaY||0,u=t.wheelDeltaX||-1*t.deltaX||0,l=Math.abs(u)&&!Math.abs(r),c=ke(u<0),f=i===c,d=o.now(),h=d-a<Nt;i=c,a=d,l&&s.ok&&(!s.prevent[c]||n)&&(_e(t,!0),n&&f&&h||(e.shift&&(n=!0,clearTimeout(s.t),s.t=setTimeout(function(){n=!1},At)),(e.onEnd||Xt)(t,e.shift?c:u)))}),s}function Ee(){o.each(o.Fotorama.instances,function(t,e){e.index=t})}ce.stop=function(t){ce.ii[t]=!1},jQuery.Fotorama=function(t,i){wt=o("html"),yt=o("body");var G,it,dt,ht,mt,bt,xt,_t,kt,Et,jt,At,Wt,Kt,Vt,Gt,ne,ae,Te,Pe,$e,je,Ne,qe,Ae,Ie,ze,Le,Oe,De,Re,He,We,Ke,Ve,Be,Xe,Qe,Ye,Ue,Ge=this,Je=o.now(),Ze=a+Je,tn=t[0],en=1,nn=t.data(),on=o("<style></style>"),an=o(he(W)),rn=o(he(s)),sn=o(he(b)).appendTo(rn),un=(sn[0],o(he(k)).appendTo(sn)),ln=o(),cn=o(he(S+" "+F+ct)),fn=o(he(S+" "+E+ct)),dn=cn.add(fn).appendTo(sn),hn=o(he($)),mn=o(he(P)).appendTo(hn),pn=o(he(j)).appendTo(mn),vn=o(),gn=o(),wn=(un.data(),pn.data(),o(he(nt)).appendTo(pn)),yn=o(he(V+ct)),bn=yn[0],xn=o(he(at)),_n=o(he(rt)).appendTo(sn)[0],kn=o(he(lt)),Cn=!1,Tn={},Sn={},Mn={},Fn={},En={},Pn={},$n={},jn=0,Nn=[];function qn(){o.each(G,function(t,e){if(!e.i){e.i=en++;var n=se(e.video,!0);if(n){var i={};e.video=n,e.img||e.thumb?e.thumbsReady=!0:i=function(t,e,n){var i,a,r=t.video;return"youtube"===r.type?(i=(a=re()+"img.youtube.com/vi/"+r.id+"/default.jpg").replace(/\/default.jpg$/,"/hqdefault.jpg"),t.thumbsReady=!0):"vimeo"===r.type?o.ajax({url:re()+"vimeo.com/api/v2/video/"+r.id+".json",dataType:"jsonp",success:function(o){t.thumbsReady=!0,ue(e,{img:o[0].thumbnail_large,thumb:o[0].thumbnail_small},t.i,n)}}):t.thumbsReady=!0,{img:i,thumb:a}}(e,G,Ge),ue(G,{img:i.img,thumb:i.thumb},e.i,Ge)}}})}function An(t){return Le[t]||Ge.fullScreen}function In(e){var n;e!==In.f&&(e?(t.html("").addClass(a+" "+Ze).append(rn).before(on).before(an),n=Ge,o.Fotorama.instances.push(n),Ee()):(rn.detach(),on.detach(),an.detach(),t.html(nn.urtext).removeClass(Ze),function(t){o.Fotorama.instances.splice(t.index,1),Ee()}(Ge)),function(t){var e="keydown."+a,n=a+Je,o="keydown."+n,s="resize."+n+" orientationchange."+n;t?(Tt.on(o,function(t){var e,n;mt&&27===t.keyCode?(e=!0,yo(mt,!0,!0)):(Ge.fullScreen||i.keyboard&&!Ge.index)&&(27===t.keyCode?(e=!0,Ge.cancelFullScreen()):t.shiftKey&&32===t.keyCode&&An("space")||37===t.keyCode&&An("left")||38===t.keyCode&&An("up")?n="<":32===t.keyCode&&An("space")||39===t.keyCode&&An("right")||40===t.keyCode&&An("down")?n=">":36===t.keyCode&&An("home")?n="<<":35===t.keyCode&&An("end")&&(n=">>")),(e||n)&&_e(t),n&&Ge.show({index:n,slow:t.altKey,user:!0})}),Ge.index||Tt.off(e).on(e,"textarea, input, select",function(t){!yt.hasClass(r)&&t.stopPropagation()}),Ct.on(s,Ge.resize)):(Tt.off(o),Ct.off(s))}(e),In.f=e)}function zn(){var t=it<2&&!i.enableifsingleframe||mt;Sn.noMove=t||$e,Sn.noSwipe=t||!i.swipe,!Ae&&un.toggleClass(C,!i.click&&!Sn.noMove&&!Sn.noSwipe),$t&&rn.toggleClass(p,!Sn.noSwipe)}function Ln(t){return t<0?(it+t%it)%it:t>=it?t%it:t}function On(t){return Qt(t,0,it-1)}function Dn(t){return Vt?Ln(t):On(t)}function Rn(t){return!!(t>0||Vt)&&t-1}function Hn(t){return!!(t<it-1||Vt)&&t+1}function Wn(t,e,n){if("number"==typeof t){t=new Array(t);var i=!0}return o.each(t,function(t,o){if(i&&(o=t),"number"==typeof o){var a=G[Ln(o)];if(a){var r="$"+e+"Frame",s=a[r];n.call(this,t,o,a,s,r,s&&s.data())}}})}function Kn(t,e,n,o){(!Oe||"*"===Oe&&o===Kt)&&(t=te(i.width)||te(t)||zt,e=te(i.height)||te(e)||Lt,Ge.resize({width:t,ratio:i.ratio||n||t/e},0,o!==Kt&&"*"))}function Vn(t,e,n,a,r,s){Wn(t,e,function(t,u,l,c,f,d){if(c){var h=Ge.fullScreen&&l.full&&l.full!==l.img&&!d.$full&&"stage"===e;if(!d.$img||s||h){var m=new Image,p=o(m),v=p.data();d[h?"$full":"$img"]=p;var g="stage"===e?h?"full":"img":"thumb",w=l[g],y=h?null:l["stage"===e?"thumb":"img"];"navThumb"===e&&(c=d.$wrap),w?(o.Fotorama.cache[w]?function t(){"error"===o.Fotorama.cache[w]?x():"loaded"===o.Fotorama.cache[w]?setTimeout(_,0):setTimeout(t,100)}():(o.Fotorama.cache[w]="*",p.on("load",_).on("error",x)),d.state="",m.src=w):x()}}function b(t){var e=Ln(u);fo(t,{index:e,src:w,frame:G[e]})}function x(){p.remove(),o.Fotorama.cache[w]="error",l.html&&"stage"===e||!y||y===w?(!w||l.html||h?"stage"===e&&(c.trigger("f:load").removeClass(X+" "+B).addClass(Q),b("load"),Kn()):(c.trigger("f:error").removeClass(X).addClass(B),b("error")),d.state="error",!(it>1&&G[u]===l)||l.html||l.deleted||l.video||h||(l.deleted=!0,Ge.splice(u,1))):(l[g]=w=y,Vn([u],e,n,a,r,!0))}function _(){var t=10;ce(function(){return!Be||!t--&&!Pt},function(){o.Fotorama.measures[w]=v.measures=o.Fotorama.measures[w]||{width:m.width,height:m.height,ratio:m.width/m.height},Kn(v.measures.width,v.measures.height,v.measures.ratio,u),p.off("load error").addClass(J+(h?" "+Z:"")).attr("alt",l.alt).prependTo(c),fe(p,(o.isFunction(n)?n():n)||Tn,a||l.fit||i.fit,r||l.position||i.position),o.Fotorama.cache[w]=d.state="loaded",setTimeout(function(){c.trigger("f:load").removeClass(X+" "+B).addClass(Q+" "+(h?Y:U)),"stage"===e?b("load"):(l.thumbratio===Ht||!l.thumbratio&&i.thumbratio===Ht)&&(l.thumbratio=v.measures.ratio,Mo())},0)})}})}function Bn(){kn.detach(),ht&&ht.stop()}function Xn(){var t,e=bt[Ot];e&&!e.data().state&&(t=e,kn.append(ht.spin().el).appendTo(t),e.on("f:load f:error",function(){e.off("f:load f:error"),Bn()}))}function Qn(t){be(t,Co),xe(t,function(){setTimeout(function(){pe(mn)},0),ro({time:qe,guessIndex:o(this).data().eq,minMax:Fn})})}function Yn(t,e){Wn(t,e,function(t,n,i,a,r,s){if(!a){a=i[r]=rn[r].clone(),(s=a.data()).data=i;var u=a[0];"stage"===e?(i.html&&o('<div class="'+ot+'"></div>').append(i._html?o(i.html).removeAttr("id").html(i._html):i.html).appendTo(a),i.caption&&o(he(st,he(ut,i.caption))).appendTo(a),i.video&&a.addClass(_).append(xn.clone()),xe(u,function(){setTimeout(function(){pe(sn)},0),_o({index:s.eq,user:!0})}),ln=ln.add(a)):"navDot"===e?(Qn(u),vn=vn.add(a)):"navThumb"===e&&(Qn(u),s.$wrap=a.children(":first"),gn=gn.add(a),i.video&&s.$wrap.append(xn.clone()))}})}function Un(t,e,n,o){return t&&t.length&&fe(t,e,n,o)}function Gn(t){Wn(t,"stage",function(t,n,a,r,s,u){if(r){var l,c=Ln(n),f=a.fit||i.fit,d=a.position||i.position;u.eq=c,$n[Ot][c]=r.css(o.extend({left:$e?0:ee(n,Tn.w,i.margin,_t)},$e&&Ut(0))),l=r[0],o.contains(e.documentElement,l)||(r.appendTo(un),yo(a.$video)),Un(u.$img,Tn,f,d),Un(u.$full,Tn,f,d)}})}function Jn(t,e){if("thumbs"===Gt&&!isNaN(t)){var n=-t,a=-t+Tn.nw;gn.each(function(){var t=o(this).data(),r=t.eq,s=function(){return{h:Ne,w:t.w}},u=s(),l=G[r]||{},c=l.thumbfit||i.thumbfit,f=l.thumbposition||i.thumbposition;u.w=t.w,t.l+t.w<n||t.l>a||Un(t.$img,u,c,f)||e&&Vn([r],"navThumb",s,c,f)})}}function Zn(t,e,n){if(!Zn[n]){var a="nav"===n&&ne,r=0;e.append(t.filter(function(){for(var t,e=o(this),n=e.data(),i=0,a=G.length;i<a;i++)if(n.data===G[i]){t=!0,n.eq=i;break}return t||e.remove()&&!1}).sort(function(t,e){return o(t).data().eq-o(e).data().eq}).each(function(){if(a){var t=o(this),e=t.data(),n=Math.round(Ne*e.data.thumbratio)||je;e.l=r,e.w=n,t.css({width:n}),r+=n+i.thumbmargin}})),Zn[n]=!0}}function to(t){return t-jn>Tn.w/3}function eo(t){return!(Vt||Cn+t&&Cn-it+t||mt)}function no(){var t=eo(0),e=eo(1);cn.toggleClass(M,t).attr(ye(t)),fn.toggleClass(M,e).attr(ye(e))}function oo(){Mn.ok&&(Mn.prevent={"<":eo(0),">":eo(1)})}function io(t){var e,n,o=t.data();return ne?(e=o.l,n=o.w):(e=t.position().left,n=t.width()),{c:e+n/2,min:-e+10*i.thumbmargin,max:-e+Tn.w-n-10*i.thumbmargin}}function ao(t){var e=bt[Qe].data();Ce(wn,{time:1.2*t,pos:e.l,width:e.w-2*i.thumbborderwidth})}function ro(t){var e=G[t.guessIndex][Qe];if(e){var n=Fn.min!==Fn.max,o=t.minMax||n&&io(bt[Qe]),i=n&&(t.keep&&ro.l?ro.l:Qt((t.coo||Tn.nw/2)-io(e).c,o.min,o.max)),a=n&&Qt(i,Fn.min,Fn.max),r=1.1*t.time;Ce(pn,{time:r,pos:a||0,onEnd:function(){Jn(a,!0)}}),wo(mn,de(a,Fn.min,Fn.max)),ro.l=i}}function so(t){for(var e=Pn[t];e.length;)e.shift().removeClass(R)}function uo(t){var e=$n[t];o.each(xt,function(t,n){delete e[Ln(n)]}),o.each(e,function(t,n){delete e[t],n.detach()})}function lo(t){_t=kt=Cn;var e=bt[Ot];e&&(so(Ot),Pn[Ot].push(e.addClass(R)),t||Ge.show.onEnd(!0),oe(un,0),uo(Ot),Gn(xt),Sn.min=Vt?-1/0:-ee(it-1,Tn.w,i.margin,_t),Sn.max=Vt?1/0:-ee(0,Tn.w,i.margin,_t),Sn.snap=Tn.w+i.margin,Fn.min=Math.min(0,Tn.nw-pn.width()),Fn.max=0,pn.toggleClass(C,!(Fn.noMove=Fn.min===Fn.max)))}function co(t,e){t&&o.each(e,function(e,n){n&&o.extend(n,{width:t.width||n.width,height:t.height,minwidth:t.minwidth,maxwidth:t.maxwidth,minheight:t.minheight,maxheight:t.maxheight,ratio:ge(t.ratio)})})}function fo(e,n){t.trigger(a+":"+e,[Ge,n])}function ho(){clearTimeout(mo.t),Be=1,i.stopautoplayontouch?Ge.stopAutoplay():We=!0}function mo(){Be&&(i.stopautoplayontouch||(po(),vo()),mo.t=setTimeout(function(){Be=0},qt+Nt))}function po(){We=!(!mt&&!Ke)}function vo(){if(clearTimeout(vo.t),ce.stop(vo.w),i.autoplay&&!We){Ge.autoplay||(Ge.autoplay=!0,fo("startautoplay"));var t=Cn,e=bt[Ot].data();vo.w=ce(function(){return e.state||t!==Cn},function(){vo.t=setTimeout(function(){if(!We&&t===Cn){var e=Wt,n=G[e][Ot].data();vo.w=ce(function(){return n.state||e!==Wt},function(){We||e!==Wt||Ge.show(Vt?ke(!ze):Wt)})}},i.autoplay)})}else Ge.autoplay&&(Ge.autoplay=!1,fo("stopautoplay"))}function go(){Ge.fullScreen&&(Ge.fullScreen=!1,Ft&&ft.cancel(tn),yt.removeClass(r),wt.removeClass(r),t.removeClass(K).insertAfter(an),Tn=o.extend({},Ve),yo(mt,!0,!0),ko("x",!1),Ge.resize(),Vn(xt,"stage"),pe(Ct,Re,De),fo("fullscreenexit"))}function wo(t,e){Ie&&(t.removeClass(O+" "+D),e&&!mt&&t.addClass(e.replace(/^|\s/g," "+L+"--")))}function yo(t,e,n){e&&(rn.removeClass(c),mt=!1,zn()),t&&t!==mt&&(t.remove(),fo("unloadvideo")),n&&(po(),vo())}function bo(t){rn.toggleClass(h,t)}function xo(t){if(!Sn.flow){var e=t?t.pageX:xo.x,n=e&&!eo(to(e))&&i.click;xo.p!==n&&sn.toggleClass(T,n)&&(xo.p=n,xo.x=e)}}function _o(t){clearTimeout(_o.t),i.clicktransition&&i.clicktransition!==i.transition?setTimeout(function(){var e=i.transition;Ge.setOptions({transition:i.clicktransition}),Ae=e,_o.t=setTimeout(function(){Ge.show(t)},10)},0):Ge.show(t)}function ko(t,e){Sn[t]=Fn[t]=e}function Co(t){_o({index:o(this).data().eq,slow:t.altKey,user:!0,coo:t._x-mn.offset().left})}function To(t){_o({index:dn.index(this)?">":"<",slow:t.altKey,user:!0})}function So(t){xe(t,function(){setTimeout(function(){pe(sn)},0),bo(!1)})}function Mo(){if(G=Ge.data=G||me(i.data)||le(t),it=Ge.size=G.length,!Fo.ok&&i.shuffle&&shuffle(G),qn(),Cn=On(Cn),it&&In(!0),function(){Ge.options=i=ve(i),$e="crossfade"===i.transition||"dissolve"===i.transition,Vt=i.loop&&(it>2||$e&&(!Ae||"slide"!==Ae)),qe=+i.transitionduration||qt,ze="rtl"===i.direction,Le=o.extend({},i.keyboard&&Bt,i.keyboard);var t,e,n,a={add:[],remove:[]};function r(t,e){a[t?"add":"remove"].push(e)}it>1||i.enableifsingleframe?(Gt=i.nav,ae="top"===i.navposition,a.remove.push(H),dn.toggle(!!i.arrows)):(Gt=!1,dn.hide()),Bn(),ht=new pt(o.extend(vt,i.spinner,gt,{direction:ze?-1:1})),no(),oo(),i.autoplay&&setAutoplayInterval(i.autoplay),je=Jt(i.thumbwidth)||It,Ne=Jt(i.thumbheight)||It,Mn.ok=En.ok=i.trackpad&&!Pt,zn(),co(i,[Tn]),(ne="thumbs"===Gt)?(Yn(it,"navThumb"),dt=gn,Qe=Rt,t=on,e=o.Fotorama.jst.style({w:je,h:Ne,b:i.thumbborderwidth,m:i.thumbmargin,s:Je,q:!Mt}),(n=t[0]).styleSheet?n.styleSheet.cssText=e:t.html(e),mn.addClass(q).removeClass(N)):"dots"===Gt?(Yn(it,"navDot"),dt=vn,Qe=Dt,mn.addClass(N).removeClass(q)):(Gt=!1,mn.removeClass(q+" "+N)),Gt&&(ae?hn.insertBefore(sn):hn.insertAfter(sn),Zn.nav=!1,Zn(dt,pn,"nav")),(Te=i.allowfullscreen)?(yn.prependTo(sn),Pe=Ft&&"native"===Te):(yn.detach(),Pe=!1),r($e,f),r(!$e,d),r(!i.captions,w),r(ze,v),r("always"!==i.arrows,y),r(!(Ie=i.shadows&&!Pt),m),rn.addClass(a.add.join(" ")).removeClass(a.remove.join(" ")),o.extend({},i)}(),!Mo.i){Mo.i=!0;var e=i.startindex;(e||i.hash&&n.hash)&&(Kt=getIndexFromHash(e||n.hash.replace(/^#/,""),G,0===Ge.index||e,e)),Cn=_t=kt=Et=Kt=Dn(Kt)||0}if(it){if(function t(){if(!t.f===ze)return t.f=ze,Cn=it-1-Cn,Ge.reverse(),!0}())return;mt&&yo(mt,!0),xt=[],uo(Ot),Mo.ok=!0,Ge.show({index:Cn,time:0}),Ge.resize()}else Ge.destroy()}function Fo(){Fo.ok||(Fo.ok=!0,fo("ready"))}rn[Ot]=o(he(x)),rn[Rt]=o(he(A+" "+z+ct,he(et))),rn[Dt]=o(he(A+" "+I+ct,he(tt))),Pn[Ot]=[],Pn[Rt]=[],Pn[Dt]=[],$n[Ot]={},rn.addClass(St?l:u).toggleClass(h,!i.controlsonstart),nn.fotorama=this,Ge.startAutoplay=function(t){return Ge.autoplay?this:(We=Ke=!1,setAutoplayInterval(t||i.autoplay),vo(),this)},Ge.stopAutoplay=function(){return Ge.autoplay&&(We=Ke=!0,vo()),this},Ge.show=function(t){var e;"object"!=typeof t?(e=t,t={}):e=t.index,e=">"===e?kt+1:"<"===e?kt-1:"<<"===e?0:">>"===e?it-1:e,e=void 0===(e=isNaN(e)?getIndexFromHash(e,G,!0):e)?Cn||0:e,Ge.activeIndex=Cn=Dn(e),jt=Rn(Cn),At=Hn(Cn),Wt=Ln(Cn+(ze?-1:1)),xt=[Cn,jt,At],kt=Vt?e:Cn;var n=Math.abs(Et-kt),o=ie(t.time,function(){return Math.min(qe*(1+(n-1)/12),2*qe)}),a=t.overPos;t.slow&&(o*=10);var r=bt;Ge.activeFrame=bt=G[Cn];var s=r===bt&&!t.user;yo(mt,bt.i!==G[Ln(_t)].i),Yn(xt,"stage"),Gn(Pt?[kt]:[kt,Rn(kt),Hn(kt)]),ko("go",!0),s||fo("show",{user:t.user,time:o}),We=!0;var u=Ge.show.onEnd=function(e){if(!u.ok){if(u.ok=!0,e||lo(!0),s||fo("showend",{user:t.user}),!e&&Ae&&Ae!==i.transition)return Ge.setOptions({transition:Ae}),void(Ae=!1);Xn(),Vn(xt,"stage"),ko("go",!1),oo(),xo(),po(),vo()}};if($e){var l=bt[Ot],c=Cn!==Et?G[Et][Ot]:null;fade(l,c,ln,{time:o,method:i.transition,onEnd:u},Nn)}else Ce(un,{pos:-ee(kt,Tn.w,i.margin,_t),overPos:a,time:o,onEnd:u});if(no(),Gt){so(Qe),Pn[Qe].push(bt[Qe].addClass(R));var f=On(Cn+Qt(kt-Et,-1,1));ro({time:o,coo:f!==Cn&&t.coo,guessIndex:void 0!==t.coo?f:Cn,keep:s}),ne&&ao(o)}return He=void 0!==Et&&Et!==Cn,Et=Cn,i.hash&&He&&!Ge.eq&&setHash(bt.id||Cn+1),this},Ge.requestFullScreen=function(){return Te&&!Ge.fullScreen&&(De=Ct.scrollTop(),Re=Ct.scrollLeft(),pe(Ct),ko("x",!0),Ve=o.extend({},Tn),t.addClass(K).appendTo(yt.addClass(r)),wt.addClass(r),yo(mt,!0,!0),Ge.fullScreen=!0,Pe&&ft.request(tn),Ge.resize(),Vn(xt,"stage"),Xn(),fo("fullscreenenter")),this},Ge.cancelFullScreen=function(){return Pe&&ft.is()?ft.cancel(e):go(),this},Ge.toggleFullScreen=function(){return Ge[(Ge.fullScreen?"cancel":"request")+"FullScreen"]()},we(e,ft.event,function(){!G||ft.is()||mt||go()}),Ge.resize=function(t){if(!G)return this;var e=arguments[1]||0,n=arguments[2];co(Ge.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:ve(t),[Tn,n||Ge.fullScreen||i]);var o=Tn.width,a=Tn.height,r=Tn.ratio,s=Ct.height()-(Gt?mn.height():0);return te(o)&&(rn.addClass(g).css({width:o,minWidth:Tn.minwidth||0,maxWidth:Tn.maxwidth||99999}),o=Tn.W=Tn.w=rn.width(),Tn.nw=Gt&&Zt(i.navwidth,o)||o,i.glimpse&&(Tn.w-=Math.round(2*(Zt(i.glimpse,o)||0))),un.css({width:Tn.w,marginLeft:(Tn.W-Tn.w)/2}),(a=(a=Zt(a,s))||r&&o/r)&&(o=Math.round(o),a=Tn.h=Math.round(Qt(a,Zt(Tn.minheight,s),Zt(Tn.maxheight,s))),sn.stop().animate({width:o,height:a},e,function(){rn.removeClass(g)}),lo(),Gt&&(mn.stop().animate({width:Tn.nw},e),ro({guessIndex:Cn,time:e,keep:!0}),ne&&Zn.nav&&ao(e)),Oe=n||!0,Fo())),jn=sn.offset().left,this},Ge.setOptions=function(t){return o.extend(i,t),Mo(),this},Ge.shuffle=function(){return G&&shuffle(G)&&Mo(),this},Ge.destroy=function(){return Ge.cancelFullScreen(),Ge.stopAutoplay(),G=Ge.data=null,In(),xt=[],uo(Ot),Mo.ok=!1,this},Ge.playVideo=function(){var t=bt,e=t.video,n=Cn;return"object"==typeof e&&t.videoReady&&(Pe&&Ge.fullScreen&&Ge.cancelFullScreen(),ce(function(){return!ft.is()||n!==Cn},function(){n===Cn&&(t.$video=t.$video||o(o.Fotorama.jst.video(e)),t.$video.appendTo(t[Ot]),rn.addClass(c),mt=t.$video,zn(),dn.blur(),yn.blur(),fo("loadvideo"))})),this},Ge.stopVideo=function(){return yo(mt,!0,!0),this},sn.on("mousemove",xo),Sn=Me(un,{onStart:ho,onMove:function(t,e){wo(sn,e.edge)},onTouchEnd:mo,onEnd:function(t){wo(sn);var e,n,a,r,s=($t&&!Xe||t.touch)&&i.arrows&&"always"!==i.arrows;if(t.moved||s&&t.pos!==t.newPos&&!t.control){var u=(e=t.newPos,n=Tn.w,a=i.margin,r=_t,-Math.round(e/(n+(a||0))-(r||0)));Ge.show({index:u,time:$e?qe:t.time,overPos:t.overPos,user:!0})}else t.aborted||t.control||function(t,e){var n=t.target;o(n).hasClass(at)?Ge.playVideo():n===bn?Ge.toggleFullScreen():mt?n===_n&&yo(mt,!0,!0):e?bo():i.click&&_o({index:t.shiftKey||ke(to(t._x)),slow:t.altKey,user:!0})}(t.startEvent,s)},timeLow:1,timeHigh:1,friction:2,select:"."+H+", ."+H+" *",$wrap:sn}),Fn=Me(pn,{onStart:ho,onMove:function(t,e){wo(mn,e.edge)},onTouchEnd:mo,onEnd:function(t){function e(){ro.l=t.newPos,po(),vo(),Jn(t.newPos,!0)}if(t.moved)t.pos!==t.newPos?(We=!0,Ce(pn,{time:t.time,pos:t.newPos,overPos:t.overPos,onEnd:e}),Jn(t.newPos),Ie&&wo(mn,de(t.newPos,Fn.min,Fn.max))):e();else{var n=t.$target.closest("."+A,pn)[0];n&&Co.call(n,t.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:mn}),Mn=Fe(sn,{shift:!0,onEnd:function(t,e){ho(),mo(),Ge.show({index:e,slow:t.altKey})}}),En=Fe(mn,{onEnd:function(t,e){ho(),mo();var n=oe(pn)+.25*e;pn.css(Yt(Qt(n,Fn.min,Fn.max))),Ie&&wo(mn,de(n,Fn.min,Fn.max)),En.prevent={"<":n>=Fn.max,">":n<=Fn.min},clearTimeout(En.t),En.t=setTimeout(function(){ro.l=n,Jn(n,!0)},Nt),Jn(n)}}),rn.hover(function(){setTimeout(function(){Be||bo(!(Xe=!0))},0)},function(){Xe&&bo(!(Xe=!1))}),Ye=function(t){_e(t),To.call(this,t)},Ue=(Ue={onStart:function(){ho(),Sn.control=!0},onTouchEnd:mo})||{},dn.each(function(){var t,e=o(this),n=e.data();n.clickOn||(n.clickOn=!0,o.extend(Se(e,{onStart:function(e){t=e,(Ue.onStart||Xt).call(this,e)},onMove:Ue.onMove||Xt,onTouchEnd:Ue.onTouchEnd||Xt,onEnd:function(e){e.moved||Ye.call(this,t)}}),{noMove:!0}))}),dn.each(function(){be(this,function(t){To.call(this,t)}),So(this)}),be(bn,Ge.toggleFullScreen),So(bn),o.each("load push pop shift unshift reverse sort splice".split(" "),function(t,e){Ge[e]=function(){return G=G||[],"load"!==e?Array.prototype[e].apply(G,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(G=me(arguments[0])),Mo(),Ge}}),Mo()},o.fn.fotorama=function(e){return this.each(function(){var n=this,i=o(this),a=i.data(),r=a.fotorama;r?r.setOptions(e,!0):ce(function(){return!(0===(t=n).offsetWidth&&0===t.offsetHeight);var t},function(){a.urtext=i.html(),new o.Fotorama(i,o.extend({},Vt,t.fotoramaDefaults,e,a))})})},o.Fotorama.instances=[],o.Fotorama.cache={},o.Fotorama.measures={},(o=o||{}).Fotorama=o.Fotorama||{},o.Fotorama.jst=o.Fotorama.jst||{},o.Fotorama.jst.style=function(t){var e,n="";return n+=".fotorama"+(null==(e=t.s)?"":e)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:1px;\nheight:"+(null==(e=t.h)?"":e)+"px}\n.fotorama"+(null==(e=t.s)?"":e)+" .fotorama__thumb-border{\nheight:"+(null==(e=t.h-t.b*(t.q?0:2))?"":e)+"px;\nborder-width:"+(null==(e=t.b)?"":e)+"px;\nmargin-top:"+(null==(e=t.m)?"":e)+"px}"},o.Fotorama.jst.video=function(t){var e="",n=Array.prototype.join;return e+='<div class="fotorama__video"><iframe src="',function(){e+=n.call(arguments,"")}(("youtube"==t.type?t.p+"youtube.com/embed/"+t.id+"?autoplay=1":"vimeo"==t.type?t.p+"player.vimeo.com/video/"+t.id+"?autoplay=1&badge=0":t.id)+(t.s&&"custom"!=t.type?"&"+t.s:"")),e+='" frameborder="0" allowfullscreen></iframe></div>\n'},o(function(){o("."+a+':not([data-auto="false"])').fotorama()})}(window,document,location,"undefined"!=typeof jQuery&&jQuery);;;;